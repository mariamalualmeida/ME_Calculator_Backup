<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Empréstimos</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/svg+xml" href="icon-192.svg">
    <link rel="apple-touch-icon" href="icon-192.svg">
    <meta name="theme-color" content="#6750A4">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Simulador ME">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css?v=20250624051500">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <div class="header-content">
                <h1 class="company-name">
                    <span class="company-line1">ME</span>
                    <span class="company-line2">EMPREENDIMENTOS</span>
                </h1>
                <h2 class="app-title">Simulador de Empréstimos</h2>
            </div>
            <div class="header-actions">
                <button class="back-btn" onclick="voltarDashboard()" aria-label="Voltar">←</button>
            </div>
        </header>

        <main class="main-content">
            <div class="input-section">
                <div class="input-group">
                    <label for="valorEmprestimo" class="input-label">Valor do empréstimo</label>
                    <div class="input-wrapper">
                        <span class="currency-symbol">R$</span>
                        <input 
                            type="text" 
                            id="valorEmprestimo" 
                            class="input-field" 
                            placeholder="0,00"
                            inputmode="numeric"
                            autocomplete="off"
                        >
                    </div>
                </div>

                <div class="input-group">
                    <label for="numeroParcelas" class="input-label">Número de parcelas</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="numeroParcelas" 
                            class="input-field" 
                            placeholder="1-15"
                            min="1"
                            max="15"
                            autocomplete="off"
                        >
                    </div>
                </div>

                <div class="input-group">
                    <label for="taxaJuros" class="input-label">Taxa de juros (%)</label>
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="taxaJuros" 
                            class="input-field" 
                            placeholder="0,00"
                            inputmode="decimal"
                            autocomplete="off"
                        >
                        <span class="percent-symbol">%</span>
                    </div>
                    <div id="limitesJuros" class="limites-info" style="display: none;"></div>
                </div>

                <div class="input-group">
                    <label for="dataInicial" class="input-label">Data inicial de vencimento (opcional)</label>
                    <input 
                        type="text" 
                        id="dataInicial" 
                        class="input-field" 
                        placeholder="DD/MM/AAAA"
                        inputmode="numeric"
                        autocomplete="off"
                    >
                    
                    <!-- Opções de cálculo de dias extras (aparece apenas quando há data) -->
                    <div id="metodoDiasExtras" class="metodo-dias-extras" style="display: none;">
                        <label class="input-label">Método de cálculo dos dias extras:</label>
                        <div class="radio-group">
                            <label class="radio-option">
                                <input type="radio" name="metodoDias" value="primeira" checked>
                                <span>Primeira parcela maior</span>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="metodoDias" value="distribuir">
                                <span>Distribuir em todas as parcelas</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Botão para expandir formulário completo -->
                <div class="input-group">
                    <button type="button" id="toggleFormCompleto" class="form-toggle-btn">
                        Dados Completos do Cliente
                        <span class="toggle-icon">▼</span>
                    </button>
                </div>

                <!-- Formulário completo (inicialmente oculto) -->
                <div id="formCompletoContainer" class="form-completo-container" style="display: none;">
                    
                    <!-- Dados Pessoais -->
                    <div class="form-section">
                        <h4 class="section-title">Dados Pessoais</h4>
                        
                        <div class="input-group">
                            <label for="nomeCompleto">Nome Completo</label>
                            <input type="text" id="nomeCompleto" placeholder="Nome completo do cliente" maxlength="150">
                        </div>

                        <div class="input-group">
                            <label for="cpfCompleto">CPF</label>
                            <input type="tel" id="cpfCompleto" placeholder="000.000.000-00" maxlength="14" inputmode="numeric">
                        </div>

                        <div class="input-group">
                            <label for="dataNascimento">Data de Nascimento</label>
                            <input type="tel" id="dataNascimento" placeholder="DD/MM/AAAA" maxlength="10" inputmode="numeric">
                        </div>

                        <div class="input-group">
                            <label for="estadoCivil">Estado Civil</label>
                            <select id="estadoCivil" class="input-field">
                                <option value="">Selecione...</option>
                                <option value="Solteiro(a)">Solteiro(a)</option>
                                <option value="Casado(a)">Casado(a)</option>
                                <option value="Divorciado(a)">Divorciado(a)</option>
                                <option value="Viúvo(a)">Viúvo(a)</option>
                                <option value="União Estável">União Estável</option>
                            </select>
                        </div>

                        <div class="input-group">
                            <label for="telefoneCompleto">Telefone</label>
                            <input type="tel" id="telefoneCompleto" placeholder="(00) 00000-0000" maxlength="15" inputmode="numeric">
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="endereco">Endereço</label>
                                <input type="text" id="endereco" placeholder="Rua, Avenida..." maxlength="200">
                            </div>
                            <div class="input-group input-small">
                                <label for="numero">Número</label>
                                <input type="text" id="numero" placeholder="123" maxlength="10">
                            </div>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="complemento">Complemento</label>
                                <input type="text" id="complemento" placeholder="Apt, Casa, Bloco..." maxlength="100">
                            </div>
                            <div class="input-group">
                                <label for="bairro">Bairro</label>
                                <input type="text" id="bairro" placeholder="Nome do bairro" maxlength="100">
                            </div>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="cidade">Cidade</label>
                                <input type="text" id="cidade" placeholder="Nome da cidade" maxlength="100">
                            </div>
                            <div class="input-group input-small">
                                <label for="estado">Estado</label>
                                <input type="text" id="estado" placeholder="UF" maxlength="2">
                            </div>
                            <div class="input-group input-small">
                                <label for="cep">CEP</label>
                                <input type="tel" id="cep" placeholder="00000-000" maxlength="9" inputmode="numeric">
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="email">E-mail</label>
                            <input type="email" id="email" placeholder="cliente@email.com" maxlength="150">
                        </div>
                    </div>

                    <!-- Dados Profissionais -->
                    <div class="form-section">
                        <h4 class="section-title">Dados Profissionais</h4>
                        
                        <div class="input-row">
                            <div class="input-group">
                                <label for="localTrabalho">Local de Trabalho</label>
                                <input type="text" id="localTrabalho" placeholder="Nome da empresa/local" maxlength="150">
                            </div>
                            <div class="input-group">
                                <label for="profissao">Profissão</label>
                                <input type="text" id="profissao" placeholder="Cargo/profissão" maxlength="100">
                            </div>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="rendaMensal">Renda Mensal</label>
                                <input type="tel" id="rendaMensal" placeholder="R$ 0,00" maxlength="20" inputmode="numeric">
                            </div>
                            <div class="input-group">
                                <label for="tempoEmprego">Tempo de Emprego</label>
                                <input type="text" id="tempoEmprego" placeholder="Ex: 2 anos, 6 meses" maxlength="50">
                            </div>
                        </div>
                    </div>

                    <!-- 1ª Referência -->
                    <div class="form-section">
                        <h4 class="section-title">1ª Referência</h4>
                        
                        <div class="input-group">
                            <label for="ref1Nome">Nome</label>
                            <input type="text" id="ref1Nome" placeholder="Nome da referência" maxlength="150">
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="ref1Rua">Rua</label>
                                <input type="text" id="ref1Rua" placeholder="Endereço da referência" maxlength="200">
                            </div>
                            <div class="input-group input-small">
                                <label for="ref1Numero">Número</label>
                                <input type="text" id="ref1Numero" placeholder="123" maxlength="10">
                            </div>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="ref1Bairro">Bairro</label>
                                <input type="text" id="ref1Bairro" placeholder="Bairro da referência" maxlength="100">
                            </div>
                            <div class="input-group">
                                <label for="ref1Cidade">Cidade</label>
                                <input type="text" id="ref1Cidade" placeholder="Cidade da referência" maxlength="100">
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="ref1Telefone">Telefone</label>
                            <input type="tel" id="ref1Telefone" placeholder="(00) 00000-0000" maxlength="15" inputmode="numeric">
                        </div>
                    </div>

                    <!-- 2ª Referência -->
                    <div class="form-section">
                        <h4 class="section-title">2ª Referência</h4>
                        
                        <div class="input-group">
                            <label for="ref2Nome">Nome</label>
                            <input type="text" id="ref2Nome" placeholder="Nome da referência" maxlength="150">
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="ref2Rua">Rua</label>
                                <input type="text" id="ref2Rua" placeholder="Endereço da referência" maxlength="200">
                            </div>
                            <div class="input-group input-small">
                                <label for="ref2Numero">Número</label>
                                <input type="text" id="ref2Numero" placeholder="123" maxlength="10">
                            </div>
                        </div>

                        <div class="input-row">
                            <div class="input-group">
                                <label for="ref2Bairro">Bairro</label>
                                <input type="text" id="ref2Bairro" placeholder="Bairro da referência" maxlength="100">
                            </div>
                            <div class="input-group">
                                <label for="ref2Cidade">Cidade</label>
                                <input type="text" id="ref2Cidade" placeholder="Cidade da referência" maxlength="100">
                            </div>
                        </div>

                        <div class="input-group">
                            <label for="ref2Telefone">Telefone</label>
                            <input type="tel" id="ref2Telefone" placeholder="(00) 00000-0000" maxlength="15" inputmode="numeric">
                        </div>
                    </div>
                </div>

                <button id="calcularBtn" class="calculate-button">
                    CALCULAR
                </button>
            </div>

            <div class="result-section">
                <div class="result-card" id="resultCard">
                    <div class="result-header">
                        <span class="material-icons">payment</span>
                        <h3>Valor da Prestação</h3>
                    </div>
                    <div class="result-value" id="resultValue">
                        R$ 0,00
                    </div>
                    <button id="exportPdfBtn" class="calculate-button" style="display: none;">
                        EXPORTAR PDF
                    </button>
                </div>
            </div>

            <div class="error-section" id="errorSection" style="display: none;">
                <div class="error-card">
                    <div class="error-header">
                        <span class="material-icons">error</span>
                        <h3>Erro de Validação</h3>
                    </div>
                    <div class="error-message" id="errorMessage"></div>
                </div>
            </div>
        </main>

        <!-- Modal de Configurações -->
        <div id="configModal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Configurações</h3>
                    <button id="closeModal" class="close-btn">
                        ✕
                    </button>
                </div>
                <div class="modal-body">
                    <div class="config-group">
                        <label for="nomeUsuario">Nome do usuário</label>
                        <input type="text" id="nomeUsuario" placeholder="Digite seu nome">
                    </div>
                    
                    <div class="config-group">
                        <label for="themeMode">Tema do aplicativo</label>
                        <select id="themeMode">
                            <option value="light">Claro</option>
                            <option value="dark">Escuro</option>
                        </select>
                    </div>
                    
                    <div class="config-group">
                        <label for="colorTheme">Paleta de cores</label>
                        <select id="colorTheme">
                            <option value="default">Padrão (Roxo)</option>
                            <option value="blue">Azul</option>
                            <option value="green">Verde</option>
                            <option value="orange">Laranja</option>
                            <option value="yellow">Amarelo</option>
                            <option value="red">Vermelho</option>
                            <option value="teal">Verde-água</option>
                            <option value="pink">Rosa</option>
                        </select>
                    </div>
                    

                    
                    <div class="config-group">
                        <label for="mostrarJurosRelatorio">Exibir taxa de juros no relatório PDF</label>
                        <select id="mostrarJurosRelatorio">
                            <option value="true">Habilitado</option>
                            <option value="false">Desabilitado</option>
                        </select>
                    </div>
                    
                    <div class="config-group admin-section">
                        <h4>Área Administrativa</h4>
                        <div class="admin-login" id="adminLoginSection">
                            <input type="text" id="adminUser" placeholder="Usuário">
                            <div class="password-wrapper">
                                <input type="password" id="adminPass" placeholder="Senha">
                                <button type="button" class="password-toggle" onclick="togglePassword('adminPass')">●</button>
                            </div>
                            <button id="adminLoginBtn">LOGIN</button>
                        </div>
                        <div id="adminPanel" style="display: none;">
                            <h5>Editar Credenciais de Acesso</h5>
                            <div class="admin-credentials">
                                <div class="config-group">
                                    <label for="newAdminUser">Novo usuário</label>
                                    <input type="text" id="newAdminUser" placeholder="Nome do usuário">
                                </div>
                                <div class="config-group">
                                    <label for="newAdminPass">Nova senha</label>
                                    <div class="password-wrapper">
                                        <input type="password" id="newAdminPass" placeholder="Nova senha">
                                        <button type="button" class="password-toggle" onclick="togglePassword('newAdminPass')">●</button>
                                    </div>
                                </div>

                            </div>
                            
                            <h5>Sistema de Juros</h5>
                            <div class="config-group">
                                <label for="sistemaJuros">Método de cálculo de juros</label>
                                <select id="sistemaJuros">
                                    <option value="compostos-mensal">Juros Compostos Mensais (Padrão)</option>
                                    <option value="simples">Juros Simples</option>
                                    <option value="compostos-diario">Juros Compostos Diários</option>
                                    <option value="compostos-prorata-real">Juros Compostos + Pro-rata Real</option>
                                </select>
                                <small style="color: #666; display: block; margin-top: 4px;">
                                    Escolha o sistema de cálculo para empréstimos e pro-rata
                                </small>
                            </div>
                            
                            <div class="config-group">
                                <label for="igpmAnual">Índice IGPM anual (%)</label>
                                <input type="text" id="igpmAnual" placeholder="0,00">
                                <small style="color: #666; display: block; margin-top: 4px;">
                                    Taxa IGPM aplicada aos cálculos de empréstimos
                                </small>
                            </div>

                            <h5>Controle de Regras</h5>
                            <div class="config-group">
                                <label for="desabilitarRegras">Regras de limite</label>
                                <select id="desabilitarRegras">
                                    <option value="habilitar" selected>Habilitar regras</option>
                                    <option value="desabilitar">Desabilitar regras (modo livre)</option>
                                </select>
                                <small style="color: #666; display: block; margin-top: 4px;">
                                    Remove todos os limites de parcelas e juros quando desabilitado
                                </small>
                            </div>
                            
                            <div class="limits-section">
                                <h5 class="limits-header" id="limitsToggle">
                                    <span>Editar Limites de Juros</span>
                                    <span class="toggle-icon">▼</span>
                                </h5>
                                <div id="limitsTable" class="limits-content" style="display: none;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="saveConfigBtn" class="save-btn">SALVAR</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="script.js?v=20250624051500"></script>
</body>
</html>
